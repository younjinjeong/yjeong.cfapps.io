<!DOCTYPE html>
<html class="bg-dark-10">




<head>
  <meta charset="utf-8">
  <title> Deploying your first .NET app on Cloud Foundry &middot; Pivotal Engineering Journal </title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/pivotal-ui.css">
  <link rel="stylesheet" href="/styleguide.css">
  <link rel="stylesheet" href="/github.css">
  <link rel="stylesheet" href="/local.css">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  
  <link href="http://feeds.feedburner.com/PivotalEngineeringJournal" rel="alternate" type="application/rss+xml" title="Pivotal Engineering Journal" />
</head>


<body>
  <div class="container">
  <div id="single-banner" class="pbxxl">
    <div class="single-banner-inner"></div>
    <p class="txt-c mvn">
      <a href="/">
        <svg x="0px" y="0px" width="200px" viewBox="0 0 435 180">
          <rect fill="#01786E" width="435" height="180"/>
          <path fill="#FFFFFF" d="M138.9,65h-11V54.4h11V65z M138.9,125.5h-11V72.8h11V125.5z"/>
          <path fill="#FFFFFF" d="M202.2,72.8l-15.3,45.5c-2.6,7.4-7.3,8.4-11.1,8.4c-5.6,0-9-2.6-11-8.4l-12.7-37.8h-5v-7.7h13.2
          l13.1,42.3c0.6,1.8,0.9,2.9,2.5,2.9c1.7,0,2-1.1,2.5-2.9l13.4-42.3H202.2z"/>
          <path fill="#FFFFFF" d="M229.3,72.8c14.2,0,24.1,9.4,24.1,22.8v8.3c0,13.4-9.9,22.8-24.1,22.8c-14.2,0-24.1-9.4-24.1-22.8
          v-8.3C205.1,82.2,215.1,72.8,229.3,72.8 M229.3,118c8.5,0,13.8-6.4,13.8-14.1v-8.3c0-7.7-5.2-14.1-13.8-14.1
          c-9,0-13.8,6.4-13.8,14.1v8.3C215.5,111.6,220.5,118,229.3,118"/>
          <path fill="#FFFFFF" d="M341,74.5c-5.5-1.4-14-2.4-20.3-2.4c-14.4,0-23.4,9.1-23.4,23.7v5.8c0,14.6,8.9,23.9,23.4,23.9
          c0.3,0,2.9,0,4.1-0.1v-8.8c-0.4,0-3.7,0.1-4.1,0.1c-7.8,0-13.1-6-13.1-15v-5.8c0-9,5.3-15,13.1-15c3.5,0,8.9,0.3,10.8,0.7
          l0.6,0.1l0,43.9h11V76.3C343,75.4,343,75,341,74.5"/>
          <rect x="353.6" y="54.4" fill="#FFFFFF" width="11" height="71"/>
          <path fill="#FFFFFF" d="M89.7,54.4H70.5v71h11.4V64.3h6.7c1.4,0,2.6,0.1,3.8,0.1c9.9,0.2,14.7,4.1,14.7,11.8
          c0,0.3,0,0.5,0,0.8c0,7.1-3.9,11.8-14.7,11.8c-1,0-2.1,0-3.2,0c0,2.7,0,7.8,0,9.5c1.1,0.1,2.2,0.1,3.2,0.1
          c15.5,0,26.4-6.1,26.4-21.4c0-0.3,0-0.6,0-0.9C118.9,60.4,107,54.4,89.7,54.4"/>
          <path fill="#FFFFFF" d="M272.8,61.5v11.3h17.9v8.5h-17.9V112c0,4.8,3.1,4.9,7.5,4.9h10.4v8.5h-14c-10.4,0-15-4.1-15-13.5V63
          L272.8,61.5z"/>
          <path fill="#FFFFFF" d="M369.6,120.9c0-2.5,2-4.6,4.6-4.6c2.5,0,4.6,2.1,4.6,4.6c0,2.5-2,4.6-4.6,4.6
          C371.6,125.5,369.6,123.4,369.6,120.9z M374.2,116.9c-2.2,0-3.9,1.8-3.9,3.9c0,2.1,1.7,3.9,3.9,3.9c2.2,0,3.9-1.8,3.9-3.9
          C378.1,118.7,376.3,116.9,374.2,116.9z M373.2,123.3h-0.5v-5c0,0,1.4,0,1.4,0c1.3,0,1.9,0.6,1.9,1.5c0,0.7-0.4,1.2-1,1.4l1.3,2.1
          h-0.6l-1.2-1.9l-1.2,0.1V123.3z M374.1,120.9c0.8,0,1.3-0.4,1.3-1.1c0-0.7-0.4-1.1-1.4-1.1c0,0-0.8,0-0.8,0v2.2L374.1,120.9z"/>
        </svg>
      </a>
    </p>
    <div class="container txt-c mvxl">
      <h1 class="title type-dark-9 mvn" id="main-title"><a href="/" class="type-dark-11 em-low title">Pivotal Engineering Journal</a></h1>
      <h3 class="type-dark-9 mvn">Technical articles from Pivotal engineers.</h3>
      
    </div>
  </div>
</div>

  <div class="container">
    <div id="post" class="bg-neutral-11 pbxxxl">
      <div class="post-header">
        <div class="phxxl pvl">
          <h1 class="title em-low type-dark-1 mvn">
            
            Deploying your first .NET app on Cloud Foundry
          </h1>
          <h2 class="h3 type-dark-3 em-default mvn post-summary">PCF 1.6 brings with it support for .NET. Here&rsquo;s how to get started.</h2>
          <div class="type-dark-5 em-default">
            Posted on
            <span class="post-date"> Wed, Jan 13, 2016 </span>
            
            
            by
            <ul class="authors">
            
              
                <li>
                  
                    <a href="https://twitter.com/micahyo">Micah Young</a>
                  
                </li>
              
            
              
                <li>
                  
                    <a href="https://twitter.com/jvshahid">John Shahid</a>
                  
                </li>
              
            
            </ul>
            <br>
            
              Categories: &nbsp;
                
                  <a href="/categories/.net">.NET</a> &nbsp;&nbsp;
                
                  <a href="/categories/cf-runtime">CF Runtime</a> &nbsp;&nbsp;
                
                <br/>
              </span>
            
            <a href="https://github.com/pivotal-cf/blog/edit/master/content/post/dotnet-quick-intro.md" class="type-sm">Edit this post on GitHub.</a>
            <div class="pull-right">
              <a href="https://twitter.com/share" class="twitter-share-button"{count} data-via="micahyo @jvshahid ">Tweet</a>
              <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
            </div>
          </div>
          <hr />
        </div>
      </div>
      <div class="panel-body phxxl pvn">
        

<p>We on the .NET team for Cloud Foundry are pretty excited about our recently released support for .NET applications in CF! As of November 2015, this 1.0 support for Windows applications is available with Pivotal Cloud Foundry (PCF) 1.6, and is completely open source and available within the <a href="https://www.cloudfoundry.org/">Cloud Foundry Foundation</a>.</p>

<p>Finally, Windows developers will have access to the magic of Cloud Foundry!</p>

<p>We&rsquo;re really excited to bring the magic of Cloud Foundry to Windows developers as well!</p>

<h2 id="some-background:fe7b60f02e4226e4a72b87835d8bd54b">Some Background</h2>

<p>Cloud Foundry is a great platform for deploying your web applications. Once you&rsquo;ve set it up, the experience as a developer is as easy as <code>cf push</code> to push your app live to the platform.</p>

<p>You may have heard about the recent <a href="https://docs.cloudfoundry.org/concepts/diego/diego-architecture.html"><em>Diego</em></a> effort within CF. If not, Onsi has a great primer <a href="https://blog.pivotal.io/pivotal-cloud-foundry/features/cf-summit-video-diego-reimagines-the-cloud-foundry-elastic-runtime">here</a>. At a high level though, Diego is the new <em>runtime</em> for CF.</p>

<p>In order to get .NET applications to run on a Windows Server, we needed to implement:</p>

<ul>
<li>Diego support for Windows</li>

<li><p>Garden container support for Windows*</p>

<p>*<em>PS. This is where we got the name of the project. Garden + Windows = Greenhouse!</em></p></li>
</ul>

<p>Over the past several months, we&rsquo;ve spent a lot of time implementing both of these on top of Windows 2012 R2, and we now <em>fully support</em> Diego on Windows! You can see all of our code on Github in <a href="https://github.com/cloudfoundry-incubator/diego-windows-release">Diego Windows</a> and <a href="https://github.com/cloudfoundry-incubator/garden-windows">Garden Windows</a>.</p>

<p>Now that we&rsquo;re all set with the background, lets actually deploy an app!</p>

<h2 id="prerequisites-for-deploying-windows-apps:fe7b60f02e4226e4a72b87835d8bd54b">Prerequisites for Deploying Windows Apps</h2>

<ul>
<li>An existing Cloud Foundry installation with Elastic Runtime/Diego support. If you don&rsquo;t have one yet, first check out <a href="http://pivotal.io/platform">Pivotal Cloud Foundry</a> or the <a href="http://docs.cloudfoundry.org/deploying/">Cloud Foundry Open Source project</a>.</li>
<li>At least one Windows cell in your CF deployment using the latest compatible Diego Windows and Garden Windows MSIs. More information can be found in the <a href="http://docs.pivotal.io/pivotalcf/opsguide/deploying-diego.html">PCF docs</a> or the <a href="https://github.com/cloudfoundry-incubator/diego-windows-release/blob/master/docs/INSTALL.md">Diego Windows Install Instructions</a> on Github</li>
<li>On your development machine (<em>Windows machine not required if you&rsquo;re using our pre-built sample app</em>):

<ul>
<li>Git. For Windows, we like <a href="https://git-for-windows.github.io/">git for windows</a></li>
<li>The latest <a href="https://github.com/cloudfoundry/cli">Cloud Foundry CLI</a></li>
</ul></li>
</ul>

<h2 id="deploying-your-first-app:fe7b60f02e4226e4a72b87835d8bd54b">Deploying your first app</h2>

<p>With that out of the way, now lets get to deploying. We&rsquo;ll start with a simple sample app that you can just push. You can follow these instructions on either a Linux or a Windows client machine.</p>

<ol>
<li><p>First clone our basic sample app to a new directory:</p>

<pre><code class="language-bash">$ git clone https://github.com/cloudfoundry-incubator/NET-sample-app.git
</code></pre>

<p>You can also download the source from the <a href="https://github.com/cloudfoundry-incubator/.NET-sample-app">GitHub page</a></p></li>

<li><p>If <em>Diego is enabled by default</em> on your CF deployment, you can just push your app and wait for it to start:</p>

<pre><code class="language-bash">$ cf push my-app -s windows2012R2 -b binary_buildpack -p ./my-app/ViewEnvironment/
</code></pre></li>
</ol>

<p>This is telling CF to push your app with the name <code>my-app</code>, using the <strong>stack</strong> <code>windows2012R2</code>, with the <strong>buildpack</strong> <code>binary_buildpack</code> from the <strong>path</strong> of <code>./my-app/ViewEnvironment/</code>.</p>

<ol>
<li><p>If it&rsquo;s not, or if you&rsquo;re not sure, you&rsquo;ll need to install the <a href="https://github.com/cloudfoundry-incubator/diego-enabler">Diego Enabler</a> CLI plugin and then enable Diego onn the application before starting it:</p>

<pre><code class="language-bash">$ cf add-plugin-repo CF-Community http://plugins.cloudfoundry.org/
$ cf install-plugin Diego-Enabler -r CF-Community
$ cf push my-app -s windows2012R2 -b binary_buildpack -p --no-start ./my-app/ViewEnvironment/
$ cf enable-diego my-app
$ cf start my-app
</code></pre></li>

<li><p>Once your app is pushed, you can navigate to the app&rsquo;s URL and you will see all the VCAP variables.  Add <code>?all=</code> to the URL to see all the system variables too.</p></li>
</ol>

<h3 id="some-notes:fe7b60f02e4226e4a72b87835d8bd54b">Some Notes:</h3>

<p>For Windows applications, we rely on the <em>binary_buildpack</em> to push pre-compiled applications. If you want to push your own app, make sure to build it locally and push those compiled binaries, as opposed to the uncompiled source files like you might do on a Linux host.</p>

<p>If you have any errors, check your application logs:</p>

<pre><code class="language-bash">$ cf logs my-app --recent
</code></pre>

<p>In general, once you&rsquo;ve built an application in Visual Studio, you&rsquo;ll want to publish the application in VS (see <a href="https://msdn.microsoft.com/library/1y1404zt(v=vs.100">MSDN instructions</a>.aspx)) and then push the folder that you&rsquo;ve published to, and not the root folder for your app.</p>

<h2 id="next-steps:fe7b60f02e4226e4a72b87835d8bd54b">Next Steps</h2>

<p>Cloud Foundry simplifies the process of deploying .NET apps. Try it with your own apps! Check your logs and report any issues to us on <a href="https://github.com/cloudfoundry-incubator/diego-windows-release">GitHub</a>, or on the <strong>#Greenhouse</strong> channel on the open <a href="http://slack.cloudfoundry.org/">Cloud Foundry Slack</a>.</p>

      </div>
    </div>
  </div>
  <link rel="stylesheet" href="/css/highlight-github.css">
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

</body>
</html>
